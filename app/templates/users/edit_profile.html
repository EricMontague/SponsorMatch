{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}SponsorMatch - Edit Profile{% endblock %}

{% block page_content %}
<div class="container edit-profile">
	<div class="page-header">
		{% if admin_route %}
			<h1>Edit Profile Admin</h1>
		{% else %}
			<h1>Edit Profile</h1>
		{% endif %}
	</div>
	<h2>Profile Picture</h2>
	{% if user.profile_photo_path %}
		<img id="editProfilePhoto" class="img-rounded" src="{{ url_for('static', filename=user.profile_photo) }}">
		<form class="remove-profile-image-form" method="POST" action="{{ url_for('main.delete_image', filename=profile_photo.split('/')[-1]) }}" enctype="multipart/form-data" role="form">
			{{ remove_image_form.hidden_tag() }}
			{{ wtf.form_errors(remove_image_form, hiddens="only") }}
			{{ wtf.form_field(remove_image_form.submit, button_map={"submit": "btn btn-danger delete-media"}) }}
		</form>
	{% else %}
		<img src="{{ url_for('static', filename='images/default_profile_photo.jpg') }}">
		<form class="upload-image-form" method="POST" {% if admin_route %}action="{{ url_for('main.add_profile_photo_admin', id=user.id) }}"{% else %}action="{{ url_for('main.add_profile_photo') }}"{% endif %} enctype="multipart/form-data" role="form">
			{{ upload_image_form.hidden_tag() }}
			{{ wtf.form_errors(upload_image_form, hiddens="only") }}
			<div class="row">
				<div class="col-md-12 upload-image">
					{{ wtf.form_field(upload_image_form.image) }}
				</div>
			</div>
			{{ wtf.form_field(upload_image_form.upload, button_map={"upload": "btn btn-primary"}) }}
		</form>
	{% endif %}

	<h2>Profile Information</h2>
	<form class="profile-form" method="POST" {% if admin_route %}action="{{ url_for('main.edit_profile_admin', id=user.id) }}"{% else %}action="{{ url_for('main.edit_profile') }}"{% endif %} role="form">
		{{ profile_form.hidden_tag() }}
		{{ wtf.form_errors(profile_form, hiddens="only") }}
		<div class="row">
			<div class="col-md-6">
				{{ wtf.form_field(profile_form.first_name) }}
			</div>
			<div class="col-md-6">
				{{ wtf.form_field(profile_form.last_name) }}
			</div>
			<div class="col-md-6">
				{{ wtf.form_field(profile_form.company) }}
			</div>
			<div class="col-md-6">
				{{ wtf.form_field(profile_form.job_title) }}
			</div>
			<div class="col-md-6">
				{{ wtf.form_field(profile_form.website) }}
			</div>
			{% if admin_route %}
				<div class="col-md-6">
					{{ wtf.form_field(profile_form.email) }}
				</div>
				<div class="col-md-6">
					{{ wtf.form_field(profile_form.role) }}
				</div>
			{% endif %}
			<div class="col-md-12">
				{{ wtf.form_field(profile_form.about) }}
			</div>
			{% if admin_route %}
				<div class="col-md-12">
					{{ wtf.form_field(profile_form.has_paid) }}
				</div>
			{% endif %}
			<div class="col-md-12">
				{{ wtf.form_field(profile_form.submit, button_map={"submit": "btn btn-primary"}) }}
				<a class="btn btn-default" href="{{ url_for('main.user_profile', company=user.company) }}">Back</a>
			</div>
		</div>
	</form>
		
</div>
{% endblock %}